<?xml version="1.0" encoding="utf-8"?>


<section xmlns="http://docbook.org/ns/docbook" version="5.0" xml:id="zend.dojo.form.examples"><info><title>Dojo Form Examples</title></info>
    

    <example xml:id="zend.dojo.form.examples.dojoform"><info><title>Using Zend_Dojo_Form</title></info>
        

        <para>
            The easiest way to utilize Dojo with <classname>Zend_Form</classname> is to
            utilize <classname>Zend_Dojo_Form</classname>, either through direct usage or
            by extending it. This example shows extending <classname>Zend_Dojo_Form</classname>, and
            shows usage of all dijit elements. It creates four sub forms, and
            decorates the form to utilize a TabContainer, showing each sub form
            in its own tab.
        </para>

        <programlisting language="php">
class My_Form_Test extends Zend_Dojo_Form
{
    /**
     * Options to use with select elements
     */
    protected $_selectOptions = array(
        'red'    =&gt; 'Rouge',
        'blue'   =&gt; 'Bleu',
        'white'  =&gt; 'Blanc',
        'orange' =&gt; 'Orange',
        'black'  =&gt; 'Noir',
        'green'  =&gt; 'Vert',
    );

    /**
     * Form initialization
     *
     * @return void
     */
    public function init()
    {
        $this-&gt;setMethod('post');
        $this-&gt;setAttribs(array(
            'name'  =&gt; 'masterForm',
        ));
        $this-&gt;setDecorators(array(
            'FormElements',
            array('TabContainer', array(
                'id' =&gt; 'tabContainer',
                'style' =&gt; 'width: 600px; height: 500px;',
                'dijitParams' =&gt; array(
                    'tabPosition' =&gt; 'top'
                ),
            )),
            'DijitForm',
        ));
        $textForm = new Zend_Dojo_Form_SubForm();
        $textForm-&gt;setAttribs(array(
            'name'   =&gt; 'textboxtab',
            'legend' =&gt; 'Text Elements',
            'dijitParams' =&gt; array(
                'title' =&gt; 'Text Elements',
            ),
        ));
        $textForm-&gt;addElement(
                'TextBox',
                'textbox',
                array(
                    'value'      =&gt; 'some text',
                    'label'      =&gt; 'TextBox',
                    'trim'       =&gt; true,
                    'propercase' =&gt; true,
                )
            )
            -&gt;addElement(
                'DateTextBox',
                'datebox',
                array(
                    'value' =&gt; '2008-07-05',
                    'label' =&gt; 'DateTextBox',
                    'required'  =&gt; true,
                )
            )
            -&gt;addElement(
                'TimeTextBox',
                'timebox',
                array(
                    'label' =&gt; 'TimeTextBox',
                    'required'  =&gt; true,
                )
            )
            -&gt;addElement(
                'CurrencyTextBox',
                'currencybox',
                array(
                    'label' =&gt; 'CurrencyTextBox',
                    'required'  =&gt; true,
                    // 'currency' =&gt; 'USD',
                    'invalidMessage' =&gt; 'Invalid amount. ' .
                                        'Include dollar sign, commas, ' .
                                        'and cents.',
                    // 'fractional' =&gt; true,
                    // 'symbol' =&gt; 'USD',
                    // 'type' =&gt; 'currency',
                )
            )
            -&gt;addElement(
                'NumberTextBox',
                'numberbox',
                array(
                    'label' =&gt; 'NumberTextBox',
                    'required'  =&gt; true,
                    'invalidMessage' =&gt; 'Invalid elevation.',
                    'constraints' =&gt; array(
                        'min' =&gt; -20000,
                        'max' =&gt; 20000,
                        'places' =&gt; 0,
                    )
                )
            )
            -&gt;addElement(
                'ValidationTextBox',
                'validationbox',
                array(
                    'label' =&gt; 'ValidationTextBox',
                    'required'  =&gt; true,
                    'regExp' =&gt; '[\w]+',
                    'invalidMessage' =&gt; 'Invalid non-space text.',
                )
            )
            -&gt;addElement(
                'Textarea',
                'textarea',
                array(
                    'label'    =&gt; 'Textarea',
                    'required' =&gt; true,
                    'style'    =&gt; 'width: 200px;',
                )
            );
        $editorForm = new Zend_Dojo_Form_SubForm();
        $editorForm-&gt;setAttribs(array(
            'name'   =&gt; 'editortab',
            'legend' =&gt; 'Editor',
            'dijitParams' =&gt; array(
                'title' =&gt; 'Editor'
            ),
        ))
        $editorForm-&gt;addElement(
            'Editor',
            'wysiwyg',
            array(
                'label'        =&gt; 'Editor',
                'inheritWidth' =&gt; 'true',
            )
        );

        $toggleForm = new Zend_Dojo_Form_SubForm();
        $toggleForm-&gt;setAttribs(array(
            'name'   =&gt; 'toggletab',
            'legend' =&gt; 'Toggle Elements',
        ));
        $toggleForm-&gt;addElement(
                'NumberSpinner',
                'ns',
                array(
                    'value'             =&gt; '7',
                    'label'             =&gt; 'NumberSpinner',
                    'smallDelta'        =&gt; 5,
                    'largeDelta'        =&gt; 25,
                    'defaultTimeout'    =&gt; 1000,
                    'timeoutChangeRate' =&gt; 100,
                    'min'               =&gt; 9,
                    'max'               =&gt; 1550,
                    'places'            =&gt; 0,
                    'maxlength'         =&gt; 20,
                )
            )
            -&gt;addElement(
                'Button',
                'dijitButton',
                array(
                    'label' =&gt; 'Button',
                )
            )
            -&gt;addElement(
                'CheckBox',
                'checkbox',
                array(
                    'label' =&gt; 'CheckBox',
                    'checkedValue'  =&gt; 'foo',
                    'uncheckedValue'  =&gt; 'bar',
                    'checked' =&gt; true,
                )
            )
            -&gt;addElement(
                'RadioButton',
                'radiobutton',
                array(
                    'label' =&gt; 'RadioButton',
                    'multiOptions'  =&gt; array(
                        'foo' =&gt; 'Foo',
                        'bar' =&gt; 'Bar',
                        'baz' =&gt; 'Baz',
                    ),
                    'value' =&gt; 'bar',
                )
            );
        $selectForm = new Zend_Dojo_Form_SubForm();
        $selectForm-&gt;setAttribs(array(
            'name'   =&gt; 'selecttab',
            'legend' =&gt; 'Select Elements',
        ));
        $selectForm-&gt;addElement(
                'ComboBox',
                'comboboxselect',
                array(
                    'label' =&gt; 'ComboBox (select)',
                    'value' =&gt; 'blue',
                    'autocomplete' =&gt; false,
                    'multiOptions' =&gt; $this-&gt;_selectOptions,
                )
            )
            -&gt;addElement(
                'ComboBox',
                'comboboxremote',
                array(
                    'label' =&gt; 'ComboBox (remoter)',
                    'storeId' =&gt; 'stateStore',
                    'storeType' =&gt; 'dojo.data.ItemFileReadStore',
                    'storeParams' =&gt; array(
                        'url' =&gt; '/js/states.txt',
                    ),
                    'dijitParams' =&gt; array(
                        'searchAttr' =&gt; 'name',
                    ),
                )
            )
            -&gt;addElement(
                'FilteringSelect',
                'filterselect',
                array(
                    'label' =&gt; 'FilteringSelect (select)',
                    'value' =&gt; 'blue',
                    'autocomplete' =&gt; false,
                    'multiOptions' =&gt; $this-&gt;_selectOptions,
                )
            )
            -&gt;addElement(
                'FilteringSelect',
                'filterselectremote',
                array(
                    'label' =&gt; 'FilteringSelect (remoter)',
                    'storeId' =&gt; 'stateStore',
                    'storeType' =&gt; 'dojo.data.ItemFileReadStore',
                    'storeParams' =&gt; array(
                        'url' =&gt; '/js/states.txt',
                    ),
                    'dijitParams' =&gt; array(
                        'searchAttr' =&gt; 'name',
                    ),
                )
            );
        $sliderForm = new Zend_Dojo_Form_SubForm();
        $sliderForm-&gt;setAttribs(array(
            'name'   =&gt; 'slidertab',
            'legend' =&gt; 'Slider Elements',
        ));
        $sliderForm-&gt;addElement(
                'HorizontalSlider',
                'horizontal',
                array(
                    'label' =&gt; 'HorizontalSlider',
                    'value' =&gt; 5,
                    'minimum' =&gt; -10,
                    'maximum' =&gt; 10,
                    'discreteValues' =&gt; 11,
                    'intermediateChanges' =&gt; true,
                    'showButtons' =&gt; true,
                    'topDecorationDijit' =&gt; 'HorizontalRuleLabels',
                    'topDecorationContainer' =&gt; 'topContainer',
                    'topDecorationLabels' =&gt; array(
                            ' ',
                            '20%',
                            '40%',
                            '60%',
                            '80%',
                            ' ',
                    ),
                    'topDecorationParams' =&gt; array(
                        'container' =&gt; array(
                            'style' =&gt; 'height:1.2em; ' .
                                       'font-size=75%;color:gray;',
                        ),
                        'list' =&gt; array(
                            'style' =&gt; 'height:1em; ' .
                                       'font-size=75%;color:gray;',
                        ),
                    ),
                    'bottomDecorationDijit' =&gt; 'HorizontalRule',
                    'bottomDecorationContainer' =&gt; 'bottomContainer',
                    'bottomDecorationLabels' =&gt; array(
                            '0%',
                            '50%',
                            '100%',
                    ),
                    'bottomDecorationParams' =&gt; array(
                        'list' =&gt; array(
                            'style' =&gt; 'height:1em; ' .
                                       'font-size=75%;color:gray;',
                        ),
                    ),
                )
            )
            -&gt;addElement(
                'VerticalSlider',
                'vertical',
                array(
                    'label' =&gt; 'VerticalSlider',
                    'value' =&gt; 5,
                    'style' =&gt; 'height: 200px; width: 3em;',
                    'minimum' =&gt; -10,
                    'maximum' =&gt; 10,
                    'discreteValues' =&gt; 11,
                    'intermediateChanges' =&gt; true,
                    'showButtons' =&gt; true,
                    'leftDecorationDijit' =&gt; 'VerticalRuleLabels',
                    'leftDecorationContainer' =&gt; 'leftContainer',
                    'leftDecorationLabels' =&gt; array(
                            ' ',
                            '20%',
                            '40%',
                            '60%',
                            '80%',
                            ' ',
                    ),
                    'rightDecorationDijit' =&gt; 'VerticalRule',
                    'rightDecorationContainer' =&gt; 'rightContainer',
                    'rightDecorationLabels' =&gt; array(
                            '0%',
                            '50%',
                            '100%',
                    ),
                )
            );

        $this-&gt;addSubForm($textForm, 'textboxtab')
             -&gt;addSubForm($editorForm, 'editortab')
             -&gt;addSubForm($toggleForm, 'toggletab')
             -&gt;addSubForm($selectForm, 'selecttab')
             -&gt;addSubForm($sliderForm, 'slidertab');
    }
}
</programlisting>
    </example>

    <example xml:id="zend.dojo.form.examples.decorating"><info><title>Modifying an existing form to utilize Dojo</title></info>
        

        <para>
            Existing forms can be modified to utilize Dojo as well, by use of
            the <methodname>Zend_Dojo::enableForm()</methodname> static method.
        </para>

        <para>
            This first example shows decorating an existing form instance:
        </para>

        <programlisting language="php">
$form = new My_Custom_Form();
Zend_Dojo::enableForm($form);
$form-&gt;addElement(
'ComboBox',
'query',
array(
    'label'        =&gt; 'Color:',
    'value'        =&gt; 'blue',
    'autocomplete' =&gt; false,
    'multiOptions' =&gt; array(
        'red'    =&gt; 'Rouge',
        'blue'   =&gt; 'Bleu',
        'white'  =&gt; 'Blanc',
        'orange' =&gt; 'Orange',
        'black'  =&gt; 'Noir',
        'green'  =&gt; 'Vert',
    ),
)
);
</programlisting>

        <para>
            Alternately, you can make a slight tweak to your form
            initialization:
        </para>

        <programlisting language="php">
class My_Custom_Form extends Zend_Form
{
    public function init()
    {
        Zend_Dojo::enableForm($this);

        // ...
    }
}
</programlisting>

        <para>
            Of course, if you can do that... you could and should simply alter
            the class to inherit from <classname>Zend_Dojo_Form</classname>, which is a drop-in
            replacement of <classname>Zend_Form</classname> that's already Dojo-enabled...
        </para>
    </example>
</section>
